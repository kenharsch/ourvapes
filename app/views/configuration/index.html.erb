<%= stylesheet_link_tag "product_list_entry" %>

<div class = "container" id = "configurator">

	<div class = "row">
		<h1>
			Configuration
		</h1>
	</div>

	<%= render "pair_compat_messages" %>

	<% session[Constants::SESS_MY_CONFIG].each_slot do |part_type, part_object| %>

	<div class = "product-tile row ">

		<% present = !part_object.nil? %>

		<div class="padded-5 bg-white-gray message-container">

		<%= render 'configuration/compat_message_indicator', part_type: part_type, present: present %>

			<strong>
				<%= part_type %>
			</strong>
			<%= render 'configuration/product_type_description', part_type: part_type %>
		</div>


		<% if present %>
		<div class = "row">
			<div class = "col-xs-12 collapse out" id = "single-compat-messages-<%=part_type%>">
				<%= render "single_compat_messages", {part_type: part_type} %>
			</div>
		</div>
		<% end %>


		<div class = "<% if present %>col-sm-9 col-xs-12<% else %>col-sm-1<% end %>">
			<% if present %><%= render 'shared/product_list_entry', prod: part_object %>
			<% @add_or_change = "Change" %>
			<% else %>
			<% @add_or_change = "Choose" %>
			<% end %>
		</div>

		<div class = "col-sm-2 col-xs-12">
			<% if present %>
			<%= button_to "Remove", {action: "remove",
				controller: "configuration", remove: part_type},
				class: "btn btn-default btn-block"%>
				<% end %>
				<%= button_to @add_or_change, {action: "list", controller: "product_list",
					type: part_type}, class: "btn btn-default btn-block"%>
				</div>

			</div>

			<% if present %><% else %> <% end %>
			<% end %>

			<div class = "col-xs-2">
				<%= button_to "Clear", "configuration/clear", method: :get, class: "btn btn-default",
				data: {confirm: "Are you sure you want to clear all products?"}%>
			</div>
			<div class = "col-xs-10 center">
				Share your Configuration!  
				<%= text_field_tag(:url, @url, :readonly => true, :size => 90, :onclick => "$(url).select()") %>
			</div>
		</div>
